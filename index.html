<html lang="en">
	<head>
		<title>TreeID</title>
		<meta name="viewport" content="width=device-width, initial-scale=1" /> 
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<link rel="stylesheet" href="css/jquery.mobile-1.4.1.css" />
		<script src="phonegap.js"></script>
		<script src="js/jquery-1.11.0.min.js"></script>
		<script src="js/jquery.mobile-1.4.1.min.js"></script>
		
	</head>
	<body>
		<div id="splash" data-role="page">
			<div data-role="header" data-theme="c">
				<h1>My PGH Parks</h1>
				<center>TreeID Audio Tour</center>
			</div>
			<div id="splashcontent" data-role="content">
				<h3>Choose a park:</h3>
				<ul data-role="listview" id="parkList">

				</ul>
			</div>
		</div><!-- splash -->

		<script type="text/javascript">
			$.getJSON("./data/parks.json", function(parks){
			   	alert("parks:"+parks[0].id);
				//Start off with an empty list every time to get the latest from server
				$("#parkList").empty();

				//add the park items as list
				$.each(parks, function(i, park){
					//alert("park:"+park.name);
					var parkName = park.name;
					var lowerCaseTrimParkName = parkName.toLowerCase().replace(/\s/g, '');
					var linkToAppend = "<li><a href=\"#"
						+ lowerCaseTrimParkName
						+ "\" data-transition=\"slide\">"
						+ parkName
						+ " Park</a></li>";
					//alert("linkToAppend:" + linkToAppend);
					$("#parkList").append(linkToAppend);
				});

			    //refresh the list view to show the latest changes
			    $("#parkList").listview("refresh");
			    
			    //creates a park link list item
				/*
				function generateParkLink(park){
					alert("parkname:"+park.name);
					return 
						  "<li><a href=\"#"
						+ park.name
						+ "\" data-transition=\"slide\">"
						+ park.name
						+ "</a></li>";
					//debugger;
					return "<li><a href=\"#\""
					    + "onclick=\"goToParkPage(\""
					    + park.name
					    + "\")>"
					    + park.name
					    + "</a></li>";
					    
				}
				*/

				function goToParkPage(parkName){

					//create the page html template
					var parkPage = 
						$("<div data-role='page' data-url=dummyUrl><div data-role='header'><h1>"
			              + parkName + "</h1></div><div data-role='content'><img border='0' src='" 
			              + parkName + "' width=204 height=288></img></div><div data-role='footer'><h4>" 
			              + parkName + "</h4></div></div>");

					//append the new page to the page container
					parkPage.appendTo( $.mobile.pageContainer );

					//go to the newly created page
					$.mobile.changePage( parkPage );
				}

		    });
		</script>
	</body>
</html>